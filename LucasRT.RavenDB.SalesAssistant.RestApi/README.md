## ravendb-sales-assistant-demo
This repository demonstrates how to use [RavenDB](https://ravendb.net) and **Gen AI Features** as a very simple sales assistant utility.

### Before you start

There are two types of Lists based on Leads sources. One is more professional oriented, and the other is more personal oriented. You can use the one that fits better your needs, or create your own templates based on the ones provided.

On Test Unit layer, you'll find two `.csv` files that you can use to import sample data into your RavenDB instance. If you want to use your own data, feed it but keep the headers in the same format as below:

#### List 1 - Professional
|Company                        | Name                        | E-mail Address            |
|-------------------------------|-----------------------------|---------------------------|
| RavenDB Ltd.                  | Lucas Tavares               | lucas.tavares@ravendb.net |

#### List 2 - Personal

| Name                  | Document Number | Gender | Email                     | BirthDate  | State | Phones        | Phone Types | Other Emails               | Other E-mail Types |
|-----------------------|-----------------|--------|---------------------------|------------|-------|---------------|-------------|----------------------------|--------------------|
| LUCAS RESENDE TAVARES | 00861541090     | M      | lucas.tavares@ravendb.net | 1991-05-25 | MG,PR | 5541991821569 | MOBILE      | lucasr.tavares@hotmail.com | PERSONAL           |

### Getting Started

Setup your RavenDB instance and create a database named `SalesAssistant`.
Then, set the connection string on `appsettings.json` file:
```json
{
  "RavenSettings": {
    "Urls": [
      "https://a.ravenchildai.development.run/"
    ],
    "DatabaseName": "SalesAssistant"
    //"ResourceName": "YourEmbeddedResourceCertificateNameIfYouSetupSecureDatabase"
  }
}
```

Setup your `launchsettings.json` file with the necessary environment variables as below. Note that you'll need your own `OpenAI API Token` to use this service:
```json
{
  "profiles": {
    "https": {
      "commandName": "Project",
      "dotnetRunMessages": true,
      "launchBrowser": true,
      "launchUrl": "swagger",
      "applicationUrl": "https://localhost:7062;http://localhost:5208",
      "environmentVariables": {
        "ASPNETCORE_ENVIRONMENT": "Development",
        "RAVENDB_PASSWORD": "LucasHR",
        "OPEN_AI_API_KEY": "PlaceYourOpenAIApiKeyHere",
        "OPEN_AI_API_URL": "https://api.openai.com/v1",
        "OPEN_AI_GENERATIVE_MODEL": "gpt-5-mini",
        "OPEN_AI_TEXTEMBEDDING_MODEL": "text-embedding-3-large"
      }
    }
  }
}
```

> Run your application from Visual Studio or `dotnet run` command.

### What's inside?

1. Static Index `LeadsMessages` to create an artificial collection `Messages` with Leads AI enriched information and appropriate Message Template based on the list type selected on Lead Import method. This collection is read only and there is no need to write on it, once it reflects any updates on `Templates` or `Leads` automatically.


2. Gen AI Services to interact with OpenAI API to generate text and embeddings.

    2.1 **Gen AI Task LeadKnowledge:** Enrich your leads with more information based on the data you have.
    It will search for information like Company, Professional or Personal e-mail, best e-mail to contact, tone of the message based on gender and age, etc and create some additional fields to be used on the message generation.
    
    2.2 **Gen AI Task CreateMessages:** It will read the artificial collection created by the Index `LeadsMessages` and for each Message on that collection, it will create up to two interpretated messages based on the template you provided for that List type and the instructions generated by the AI, like language, voice tone, lead name, e-mail address, and create a subject suggestion on it for both personal and/or personal scenarios.

### Using the application with Swagger

You can access the Swagger UI on `https://localhost:7062/swagger` or `http://localhost:5208/swagger` depending on your setup and follow the steps below:

1. Create your Message Templates using `TemplatesController`. You can use the sample templates provided below or create your own based on your needs.
Create your Message Templates using `List1` or `List2` parameters create the message sample you want to generate to your leads. Avoid conflicts, so create a single template for each List type. This is something that is in my `TODO` list.

    A good template would be something like an e-mail or instant messaging text to send to your Lead according to the list you have:
    ```
    "Hi {FirstName},\n\nI came across your profile and was impressed by your experience in {Industry}. I would love to connect and learn more about your work at {Company}, then understand how RavenDB could create value to your business.\n\nBest regards,\n{YourName}"
    ```

2. After your templates creation you can import the data from the CSV files into your RavenDB instance from `LeadsController`, selecting the `List1` or `List2` option and the Language (`pt-BR`) that your leads list speak.

3. Use the MessagesController to generate the messages for your leads. You can select the `List1` or `List2` option based on the data you imported, choose your paging strategy and you'll receive an HTML view format to get the post processed messages to e-mail your leads.

> The most interesting part is that if you include Leads or change both, Messages Templates or Leads Information, the index will update the artificial collection and the AI Tasks would enrich leads information, what would update the messages generated as well.

### Whats Next?

Now that you could see how to use RavenDB and GenAI to create a simple Sales Assistant, you can explore more possibilities with it.

So, imagine that you collect this Leads informations from different sources, like spreadsheets, other applications, integrations, whatever... and you have a couple of e-mail templates in your preffered language. You can use it to create messages based on a leads database.

So you'll have personalized messages, subjects and the recipients for your leads, ready to be sent.

A next step could be integrate with SES or Sengrid or similars to shot e-mail or other messaging platforms you wish.

### Enjoy it!

Let me know if you have any questions or suggestions.
- [Lucas Tavares](https://www.linkedin.com/in/lucasrtavares/)
- [lucas.tavares@ravendb.net](mailto:lucas.tavares@ravendb.net)